/* public/style.css (ファイル5) */

body{font-family:'Noto Sans JP',sans-serif;background-color:#f8f7f7;}
.btn{@apply py-2 px-6 border border-gray-800 text-gray-800 transition-all duration-300 rounded-md text-sm font-bold tracking-wider shadow-sm whitespace-nowrap;}
.btn:hover:not(:disabled){@apply bg-gray-800 text-white shadow-md transform -translate-y-px;}
.btn:disabled{@apply border-gray-300 text-gray-400 cursor-not-allowed bg-gray-100 shadow-none;}
.btn-active{@apply bg-gray-800 text-white shadow-md transform -translate-y-px;}
.select-box{@apply block w-full p-3 bg-white border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-800 focus:border-transparent transition-shadow;}
.screen{@apply w-full max-w-7xl mx-auto p-4 md:p-8;}
.card{@apply bg-white p-6 md:p-8 shadow-lg rounded-xl border border-gray-200;}
#loading-overlay > div > div { border-top-color: #333; border-bottom-color: #333; }

/* Word Cloud/Chartのコンテナ */
.chart-container { 
    overflow: hidden; 
    border: 1px solid #e5e7eb; 
    border-radius: 0.5rem; 
    padding: 1rem; 
    background-color: #f9fafb;
    /* ▼▼▼ [修正] h-full を追加 (WCの2x2グリッド対応) ▼▼▼ */
    @apply flex flex-col justify-center items-center h-full;
}
#word-cloud-canvas { width: 100%; height: 100%; border: 1px solid #e5e7eb; border-radius: 0.5rem; background-color: #f9fafb; cursor: default; }

/* ▼▼▼ [新規] グラフ背景色 ▼▼▼ */
.clinic-graph-bg-yellow {
    background-color: #FFFFE0; /* 薄い黄色 */
}

/* AI分析タブ */
.tab-button { @apply px-4 py-2 text-sm font-medium border-b-2 border-transparent hover:border-gray-300 hover:text-gray-700 whitespace-nowrap cursor-pointer; }
.tab-button.active { @apply border-indigo-500 text-indigo-600; }
.tab-content { @apply p-4 border border-t-0 rounded-b-md bg-gray-50;}

/* AI分析 編集エリア */
.edit-textarea {
    @apply w-full p-2 border border-blue-300 rounded focus:ring-2 focus:ring-blue-500 focus:outline-none font-mono;
    min-height: 400px;
    font-size: 12pt;
}

/* ▼▼▼ [修正] レポート本文レイアウト (A4固定) ▼▼▼ */
.report-body {
    width: 100%;
    max-width: 1122px; 
    aspect-ratio: 297 / 210; 
    min-height: 793px; 
    margin: 0 auto;
    padding: 40px;
    border: 8px solid #fcf1ed; 
    border-radius: 12px;
    background-color: #ffffff;
    
    /* [修正] Flexboxコンテナ化 */
    display: flex;
    flex-direction: column;
    
    overflow: hidden;
    position: relative;
}

.report-title {
    font-size: 16pt;
    font-weight: bold;
    margin-bottom: 8px;
    text-align: left !important;
    flex-shrink: 0; /* 縮まない */
}
.report-subtitle {
    font-size: 12pt;
    color: #6b7280;
    margin-bottom: 16px;
    white-space: pre-wrap;
    text-align: left; /* デフォルト左揃え */
    flex-shrink: 0;
}
.report-separator {
    border-top: 1px dashed #9ca3af;
    margin-bottom: 16px; /* マージン調整 */
    flex-shrink: 0;
}

/* ▼▼▼ [修正] コメント用ヘッダー (index.html で <main> の外に移動) ▼▼▼ */
#slide-header {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    align-items: center;
    min-height: 40px; /* 高さを確保 */
    /* margin-bottom: 16px; (index.html 側で mb-4 を指定) */
    flex-shrink: 0;
}
#comment-sub-nav {
    @apply flex flex-wrap gap-2;
}
#comment-sub-nav .btn {
    @apply !py-1 !px-3 !text-xs; /* サブナビボタンは小さく */
}
#comment-controls {
    @apply flex items-center gap-3;
}
#comment-controls .btn {
    @apply !py-1 !px-3 !text-xs; /* 操作ボタンも小さく */
}
#comment-controls span {
    @apply text-sm font-semibold text-gray-600 whitespace-nowrap;
}
.comment-save-btn {
    @apply !border-green-600 !text-green-600 hover:!bg-green-600 hover:!text-white;
}

/* [修正] メインコンテンツエリア (flex-grow で残りを埋める) */
.report-content {
    flex-grow: 1; /* 残りの高さをすべて占有 */
    overflow: hidden; 
    position: relative;
    height: 100%; /* Flexアイテムとして高さを100%に */
}

/* スライド本体 (グラフ/コメントリスト) */
#slide-body {
    height: 100%;
    /* ▼▼▼ [修正] スクロールは内部要素で行うためここは hidden ▼▼▼ */
    overflow-y: hidden; 
}


/* ▼▼▼ [修正] 著作権フッター (高さを詰めて最下部に配置) ▼▼▼ */
.report-copyright {
    font-size: 12pt;
    text-align: center;
    color: #6b7280;
    padding-top: 8px; /* 16px -> 8px */
    border-top: none; /* 1px solid #eee -> none */
    flex-shrink: 0; /* 縮まない */
    margin-top: auto; /* ★ Flexコンテナの最下部に配置 */
}

/* ▼▼▼ [修正] AI分析専用スタイル (20/80レイアウト, 五角形矢印) ▼▼▼ */
.ai-analysis-container {
    @apply flex h-full;
    overflow: hidden;
}
.ai-analysis-sidebar {
    @apply w-1/5 flex-shrink-0 pr-4 flex flex-col justify-start items-start;
    height: 100%;
    overflow: hidden;
}
.ai-analysis-content {
    @apply w-4/5 pl-4 whitespace-pre-wrap;
    height: 100%;
    font-size: 12pt;
    line-height: 1.5;
    /* ▼▼▼ [修正] overflow: hidden -> auto (改行＆スクロール対応) ▼▼▼ */
    overflow-y: auto; 
    /* ▼▼▼ [追加] 左揃えを明記 ▼▼▼ */
    text-align: left;
}

/* ▼▼▼ [修正] AI分析の「形」を五角形矢印に変更 ▼▼▼ */
.ai-analysis-shape {
    /* ▼▼▼ [置換] 新しいスタイル (濃いグレーの五角形矢印) ▼▼▼ */
    @apply bg-gray-700 text-white font-bold py-3 px-4 rounded-sm shadow-md mb-4;
    width: 100%;
    min-height: 60px; /* 最低限の高さを確保 */
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    font-size: 14pt;
    /* ▼▼▼ ご提示いただいた画像（スクリーンショット 2025-11-08 12.29.58.png）の形状 ▼▼▼ */
    clip-path: polygon(0% 0%, 85% 0%, 100% 50%, 85% 100%, 0% 100%);
}

/* 表のフォントサイズ (変更なし) */
.municipality-table-container table {
    font-size: 10pt;
}
.municipality-table-container th, 
.municipality-table-container td {
    padding: 6px 12px;
}

/* ▼▼▼ [修正] コメント編集用textarea (テキスト風スタイルに変更) ▼▼▼ */
.comment-edit-textarea {
    @apply w-full p-1 border-0 rounded-none focus:ring-0 focus:outline-none focus:bg-gray-100;
    font-size: 12pt;
    line-height: 1.5;
    white-space: pre-wrap;
    /* ▼▼▼ [修正] 内容が多い場合はスクロール許可 (textarea自体) ▼▼▼ */
    overflow-y: auto; 
    resize: none; /* リサイズ禁止 */
    min-height: 42px; /* 1行+paddingの高さ */
    height: auto; /* 内容に応じて高さを自動調整 (JSでも補佐) */
    margin-bottom: 0px; /* 余白を削除 */
    border-bottom: 1px solid #eee; /* テキスト間の区切り線 */
    background-color: transparent; /* 背景色を透明に */
}
